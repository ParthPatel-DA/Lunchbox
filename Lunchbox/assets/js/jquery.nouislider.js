(function($,undefined){"use strict";if($.zepto&&!$.fn.removeData){throw new ReferenceError("Zepto is loaded without the data module.");}$.fn.noUiSlider=function(options){var namespace='.nui',all=$(document),actions={start:'mousedown touchstart',move:'mousemove touchmove',end:'mouseup touchend'},$VAL=$.fn.val,clsList=['noUi-base','noUi-origin','noUi-handle','noUi-input','noUi-active','noUi-state-tap','noUi-target','-lower','-upper','noUi-connect','noUi-vertical','noUi-horizontal','noUi-background','noUi-z-index'],stdCls={base:[clsList[0]],origin:[clsList[1]],handle:[clsList[2]]},percentage={to:function(range,value){value=range[0]<0?value+Math.abs(range[0]):value-range[0];return(value*100)/this.len(range);},from:function(range,value){return(value*100)/this.len(range);},is:function(range,value){return((value*this.len(range))/100)+range[0];},len:function(range){return(range[0]>range[1]?range[0]-range[1]:range[1]-range[0]);}},eventHandlers=[function(){this.target.val([!this.i?this.val():null,this.i?this.val():null],{trusted:false});},function(e){e.stopPropagation();}];if(window.navigator.pointerEnabled){actions={start:'pointerdown',move:'pointermove',end:'pointerup'};}else if(window.navigator.msPointerEnabled){actions={start:'MSPointerDown',move:'MSPointerMove',end:'MSPointerUp'};}function call(f,scope,args){if(!$.isArray(f)){f=[f];}$.each(f,function(i,q){if(typeof q==="function"){q.call(scope,args);}});}function instance(object){return object instanceof $||($.zepto&&$.zepto.isZ(object));}function fixEvent(e){e.preventDefault();var touch=e.type.indexOf('touch')===0,mouse=e.type.indexOf('mouse')===0,pointer=e.type.indexOf('pointer')===0,x,y,event=e;if(e.type.indexOf('MSPointer')===0){pointer=true;}if(e.originalEvent){e=e.originalEvent;}if(touch){x=e.changedTouches[0].pageX;y=e.changedTouches[0].pageY;}if(mouse||pointer){if(!pointer&&window.pageXOffset===undefined){window.pageXOffset=document.documentElement.scrollLeft;window.pageYOffset=document.documentElement.scrollTop;}x=e.clientX+window.pageXOffset;y=e.clientY+window.pageYOffset;}return $.extend(event,{x:x,y:y});}function attach(events,target,callback,scope,noAbstraction){events=events.replace(/\s/g,namespace+' ')+namespace;if(noAbstraction){if(noAbstraction>1){scope=$.extend(target,scope);}return target.on(events,$.proxy(callback,scope));}scope.handler=callback;return target.on(events,$.proxy(function(e){if(this.target.is('[class*="noUi-state-"], [disabled]')){return false;}this.handler(fixEvent(e));},scope));}function isNumeric(a){return!isNaN(parseFloat(a))&&isFinite(a);}function getPercentage(a){return parseFloat(this.style[a]);}function test(o,set){function ser(r){return(instance(r)||typeof r==='string'||r===false);}var TESTS={"handles":{r:true,t:function(q){q=parseInt(q,10);return(q===1||q===2);}},"range":{r:true,t:function(q,o,w){if(q.length!==2){return false;}q=[parseFloat(q[0]),parseFloat(q[1])];if(!isNumeric(q[0])||!isNumeric(q[1])){return false;}if(w==="range"&&q[0]===q[1]){return false;}if(q[1]<q[0]){return false;}o[w]=q;return true;}},"start":{r:true,t:function(q,o,w){if(o.handles===1){if($.isArray(q)){q=q[0];}q=parseFloat(q);o.start=[q];return isNumeric(q);}return this.parent.range.t(q,o,w);}},"connect":{t:function(q,o){return(q===true||q===false||(q==='lower'&&o.handles===1)||(q==='upper'&&o.handles===1));}},"orientation":{t:function(q){return(q==="horizontal"||q==="vertical");}},"margin":{r:true,t:function(q,o,w){q=parseFloat(q);o[w]=q;return isNumeric(q);}},"serialization":{r:true,t:function(q,o){if(!q.resolution){o.serialization.resolution=0.01;}else{switch(q.resolution){case 1:case 0.1:case 0.01:case 0.001:case 0.0001:case 0.00001:break;default:return false;}}if(!q.mark){o.serialization.mark='.';}else{return(q.mark==='.'||q.mark===',');}if(q.to){if(o.handles===1){if(!$.isArray(q.to)){q.to=[q.to];}o.serialization.to=q.to;return ser(q.to[0]);}return(q.to.length===2&&ser(q.to[0])&&ser(q.to[1]));}return false;}},"slide":{t:function(q){return typeof q==="function";}},"set":{t:function(q,o){return this.parent.slide.t(q,o);}},"step":{t:function(q,o,w){return this.parent.margin.t(q,o,w);}},"init":function(){var obj=this;$.each(obj,function(i,c){c.parent=obj;});delete this.init;return this;}},a=TESTS.init();$.each(a,function(i,v){if((v.r&&(!o[i]&&o[i]!==0))||((o[i]||o[i]===0)&&!v.t(o[i],o,i))){if(console&&console.log&&console.group){console.group("Invalid noUiSlider initialisation:");console.log("Option:\t",i);console.log("Value:\t",o[i]);console.log("Slider:\t",set[0]);console.groupEnd();}throw new RangeError("noUiSlider");}});}function closest(value,to){return Math.round(value/to)*to;}function format(value,target){value=value.toFixed(target.data('decimals'));return value.replace('.',target.data('mark'));}function setHandle(handle,to,forgive){var nui=handle.data('nui').options,handles=handle.data('nui').base.data('handles'),style=handle.data('nui').style,hLimit;if(!isNumeric(to)){return false;}if(to===handle[0].gPct(style)){return false;}to=to<0?0:to>100?100:to;if(nui.step&&!forgive){to=closest(to,percentage.from(nui.range,nui.step));}if(to===handle[0].gPct(style)){return false;}if(handle.siblings('.'+clsList[1]).length&&!forgive&&handles){if(handle.data('nui').number){hLimit=handles[0][0].gPct(style)+nui.margin;to=to<hLimit?hLimit:to;}else{hLimit=handles[1][0].gPct(style)-nui.margin;to=to>hLimit?hLimit:to;}if(to===handle[0].gPct(style)){return false;}}if(handle.data('nui').number===0&&to>95){handle.addClass(clsList[13]);}else{handle.removeClass(clsList[13]);}handle.css(style,to+'%');handle.data('store').val(format(percentage.is(nui.range,to),handle.data('nui').target));return true;}function store(handle,S){var i=handle.data('nui').number,scope={target:handle.data('nui').target,options:handle.data('nui').options,handle:handle,i:i};if(instance(S.to[i])){attach('change blur',S.to[i],eventHandlers[0],scope,2);attach('change',S.to[i],scope.options.set,scope.target,1);return S.to[i];}if(typeof S.to[i]==="string"){return $('<input type="hidden" name="'+S.to[i]+'">').appendTo(handle).addClass(clsList[3]).change(eventHandlers[1]);}if(S.to[i]===false){return{val:function(a){if(a===undefined){return this.handleElement.data('nui-val');}this.handleElement.data('nui-val',a);},hasClass:function(){return false;},handleElement:handle};}}function move(event){var base=this.base,style=base.data('style'),proposal=event.x-this.startEvent.x,baseSize=style==='left'?base.width():base.height();if(style==='top'){proposal=event.y-this.startEvent.y;}proposal=this.position+((proposal*100)/baseSize);setHandle(this.handle,proposal);call(base.data('options').slide,base.data('target'));}function end(){var base=this.base,handle=this.handle;handle.children().removeClass(clsList[4]);all.off(actions.move);all.off(actions.end);$('body').off(namespace);base.data('target').change();call(handle.data('nui').options.set,base.data('target'));}function start(event){var handle=this.handle,position=handle[0].gPct(handle.data('nui').style);handle.children().addClass(clsList[4]);attach(actions.move,all,move,{startEvent:event,position:position,base:this.base,target:this.target,handle:handle});attach(actions.end,all,end,{base:this.base,target:this.target,handle:handle});$('body').on('selectstart'+namespace,function(){return false;});}function selfEnd(event){event.stopPropagation();end.call(this);}function tap(event){if(this.base.find('.'+clsList[4]).length){return;}var i,handle,hCenter,base=this.base,handles=this.handles,style=base.data('style'),eventXY=event[style==='left'?'x':'y'],baseSize=style==='left'?base.width():base.height(),offset={handles:[],base:{left:base.offset().left,top:base.offset().top}};for(i=0;i<handles.length;i++){offset.handles.push({left:handles[i].offset().left,top:handles[i].offset().top});}hCenter=handles.length===1?0:((offset.handles[0][style]+offset.handles[1][style])/2);if(handles.length===1||eventXY<hCenter){handle=handles[0];}else{handle=handles[1];}base.addClass(clsList[5]);setTimeout(function(){base.removeClass(clsList[5]);},300);setHandle(handle,(((eventXY-offset.base[style])*100)/baseSize));call([handle.data('nui').options.slide,handle.data('nui').options.set],base.data('target'));base.data('target').change();}function create(options){return this.each(function(index,target){target=$(target);target.addClass(clsList[6]);var i,style,decimals,handle,base=$('<div/>').appendTo(target),handles=[],cls={base:stdCls.base,origin:[stdCls.origin.concat([clsList[1]+clsList[7]]),stdCls.origin.concat([clsList[1]+clsList[8]])],handle:[stdCls.handle.concat([clsList[2]+clsList[7]]),stdCls.handle.concat([clsList[2]+clsList[8]])]};options=$.extend({handles:2,margin:0,orientation:"horizontal"},options)||{};if(!options.serialization){options.serialization={to:[false,false],resolution:0.01,mark:'.'};}test(options,target);options.S=options.serialization;if(options.connect){if(options.connect==="lower"){cls.base.push(clsList[9],clsList[9]+clsList[7]);cls.origin[0].push(clsList[12]);}else{cls.base.push(clsList[9]+clsList[8],clsList[12]);cls.origin[0].push(clsList[9]);}}else{cls.base.push(clsList[12]);}style=options.orientation==='vertical'?'top':'left';decimals=options.S.resolution.toString().split('.');decimals=decimals[0]==="1"?0:decimals[1].length;if(options.orientation==="vertical"){cls.base.push(clsList[10]);}else{cls.base.push(clsList[11]);}base.addClass(cls.base.join(" ")).data('target',target);target.data({base:base,mark:options.S.mark,decimals:decimals});for(i=0;i<options.handles;i++){handle=$('<div><div/></div>').appendTo(base);handle.addClass(cls.origin[i].join(" "));handle.children().addClass(cls.handle[i].join(" "));attach(actions.start,handle.children(),start,{base:base,target:target,handle:handle});attach(actions.end,handle.children(),selfEnd,{base:base,target:target,handle:handle});handle.data('nui',{target:target,decimals:decimals,options:options,base:base,style:style,number:i}).data('store',store(handle,options.S));handle[0].gPct=getPercentage;handles.push(handle);setHandle(handle,percentage.to(options.range,options.start[i]));}base.data({options:options,handles:handles,style:style});target.data({handles:handles});attach(actions.end,base,tap,{base:base,target:target,handles:handles});});}function getValue(){var re=[];$.each($(this).data('handles'),function(i,handle){re.push(handle.data('store').val());});return(re.length===1?re[0]:re);}function val(args,modifiers){if(args===undefined){return getValue.call(this);}modifiers=modifiers===true?{trigger:true}:(modifiers||{});if(!$.isArray(args)){args=[args];}return this.each(function(index,target){target=$(target);$.each($(this).data('handles'),function(j,handle){if(args[j]===null||args[j]===undefined){return;}var value,current,range=handle.data('nui').options.range,to=args[j],result;modifiers.trusted=true;if(modifiers.trusted===false||args.length===1){modifiers.trusted=false;}if(args.length===2&&$.inArray(null,args)>=0){modifiers.trusted=false;}if($.type(to)==="string"){to=to.replace(',','.');}to=percentage.to(range,parseFloat(to));result=setHandle(handle,to,modifiers.trusted);if(modifiers.trigger){call(handle.data('nui').options.set,target);}if(!result){value=handle.data('store').val();current=percentage.is(range,handle[0].gPct(handle.data('nui').style));if(value!==current){handle.data('store').val(format(current,target));}}});});}$.fn.val=function(){return this.hasClass(clsList[6])?val.apply(this,arguments):$VAL.apply(this,arguments);};return create.call(this,options);};}($));